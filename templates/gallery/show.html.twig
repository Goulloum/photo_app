{% extends 'base.html.twig' %} {% block stylesheets %}
<link rel="stylesheet" href="{{ asset('css/gallery/show.css') }}" />
{% endblock %} {% block body %}
<div class="gallery-container">
    <h1 class="gallery-title">{{ gallery.name }}</h1>
    <div class="grid-container">
        {% for photo in gallery.photos %}
        <div class="photo-container">
            <img
                src="{{ asset('imgs/' ~ gallery.name|lower|replace({' ': '_'}) ~ '/' ~ photo.path) }}"
                alt="{{ photo.name }}"
                class="photo"
                photo-id="{{ photo.id }}"
            />
        </div>
        {% endfor %}
    </div>
    <div class="photo-modal-container">
        <div class="photo-modal">
            <div class="controls">
                <span class="material-symbols-outlined info"> info </span>
                <span class="material-symbols-outlined fullscreen">
                    fullscreen
                </span>

                <span class="material-symbols-outlined close"> close </span>
            </div>
            <img src="" alt="" />
            <div class="details-photo">
                <div class="photo-title"></div>
                <div class="date-photo"></div>
                <div class="location-photo"></div>
                <p class="description-photo"></p>
            </div>
        </div>
    </div>
</div>

<script>

    let photos = [{% for photo in gallery.photos %} {
        id: {{ photo.id }},
        name: "{{ photo.name }}",
        path: "{{ asset('imgs/' ~ gallery.name|lower|replace({' ': '_'}) ~ '/' ~ photo.path) }}",
        date: "{{ photo.datePhoto|date('d/m/Y') }}",
        location: "{{ photo.location }}",
        description: "{{ photo.description|escape('js') }}"
    },
    {% endfor %}]

    $(document).ready(() => {
        $('.photo-modal-container').hide()
        $('.details-photo').hide()
    })

    $('.photo-container').click(() => {
        let photoId = $(event.target).attr('photo-id')
        let photo = photos.find((photo) => photo.id == photoId)
        $('.photo-modal img').attr('src', photo.path)
        $('.photo-modal img').attr('attr', photo.name)
        $('.photo-modal .photo-title').text(photo.name)
        $('.photo-modal .date-photo').text(photo.date)
        $('.photo-modal .location-photo').text(photo.location)
        $('.photo-modal .description-photo').text(photo.description)

        $('.photo-modal-container').show()
    })
    $('.controls .close').click(() => {
        $('.photo-modal-container').hide()
    })
    $('.controls .fullscreen').click(function() {
        if(document.fullscreenElement) {
            document.exitFullscreen()
            $(this).html('fullscreen')
        } else {
            $('.photo-modal-container')[0].requestFullscreen()
            $(this).html('close_fullscreen')
            console.log($(this).html())
        }
    })
    $('.controls .info').click(function() {
        $(this).show();
    })
</script>

{% endblock %}
